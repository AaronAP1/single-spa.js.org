"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3737],{1038:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>r,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var a=i(4848),n=i(8453);const l={id:"separating-applications",title:"Splitting up applications",sidebar_label:"Splitting applications"},t=void 0,o={id:"separating-applications",title:"Splitting up applications",description:"In a large, microserviced system, your root single-spa configuration and each of the applications should probably have its own git repository. How to do that in a JavaScript project isn't necessarily clear, so some options are listed below.",source:"@site/versioned_docs/version-4.x/separating-applications.md",sourceDirName:".",slug:"/separating-applications",permalink:"/docs/4.x/separating-applications",draft:!1,unlisted:!1,editUrl:"https://github.com/single-spa/single-spa.js.org/blob/master/website/versioned_docs/version-4.x/separating-applications.md",tags:[],version:"4.x",frontMatter:{id:"separating-applications",title:"Splitting up applications",sidebar_label:"Splitting applications"},sidebar:"docs",previous:{title:"single-spa applications",permalink:"/docs/4.x/building-applications"},next:{title:"Migrating existing code",permalink:"/docs/4.x/migrating-existing-spas"}},r={},c=[{value:"Option 1: One code repo, one build",id:"option-1-one-code-repo-one-build",level:4},{value:"Option 2: NPM packages",id:"option-2-npm-packages",level:4},{value:"Option 3: Dynamic Module Loading",id:"option-3-dynamic-module-loading",level:4},{value:"Comparison",id:"comparison",level:4}];function d(e){const s={a:"a",code:"code",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.p,{children:"In a large, microserviced system, your root single-spa configuration and each of the applications should probably have its own git repository. How to do that in a JavaScript project isn't necessarily clear, so some options are listed below."}),"\n",(0,a.jsx)(s.p,{children:"Since single-spa is a framework that helps with organizational scaling, it is important to figure out how to split out and separate applications from each other so that developers and teams can work on the applications without interfering one another."}),"\n",(0,a.jsxs)(s.p,{children:["Most interpretations of microservice architecture encourage separate code repositories, builds, and deployments. Although ",(0,a.jsx)(s.strong,{children:"single-spa does not solve how code is hosted, built, or deployed"}),", these are relevant to many users of single-spa, so some strategies for doing so are discussed here."]}),"\n",(0,a.jsx)(s.h4,{id:"option-1-one-code-repo-one-build",children:"Option 1: One code repo, one build"}),"\n",(0,a.jsxs)(s.p,{children:["The simplest approach for using single-spa is to have one code repository with everything in it. Typically, you would have a single package.json with a single webpack config that produces a bundle that can be included in an HTML file with a ",(0,a.jsx)(s.code,{children:"<script>"})," tag."]}),"\n",(0,a.jsx)(s.p,{children:"Advantages:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Simplest to set up"}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.a,{href:"https://danluu.com/monorepo/",children:"monolithic version control has some advantages"})}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Disadvantages:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"One master Webpack config and package.json means less flexibility and freedom for each individual project"}),"\n",(0,a.jsx)(s.li,{children:"Slow build times once your project gets large"}),"\n",(0,a.jsx)(s.li,{children:"Builds and deployments are all tied together, which can necessitate fixed release schedules instead of ad hoc releases."}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"option-2-npm-packages",children:"Option 2: NPM packages"}),"\n",(0,a.jsx)(s.p,{children:"Create a root application that npm installs each of the single-spa applications. Each child application is in a separate code repository and is responsible for publishing a new version everytime that it updates. The root application should reinstall, rebuild, and redeploy whenever a single-spa application changes."}),"\n",(0,a.jsx)(s.p,{children:"Typically, the single-spa applications compile themselves separately with babel and/or webpack."}),"\n",(0,a.jsxs)(s.p,{children:["Note that you can also use the ",(0,a.jsx)(s.a,{href:"https://medium.com/netscape/the-case-for-monorepos-907c1361708a",children:"monorepo methodology"})," which allows for separate builds without having separate code repositories."]}),"\n",(0,a.jsx)(s.p,{children:"Advantages:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"npm install is familiar and easy to set up"}),"\n",(0,a.jsx)(s.li,{children:"Separate npm packages means each application can build itself separately before publishing to npm"}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"Disadvantages:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"The root application must reinstall the child applications in order to rebuild/redeploy"}),"\n",(0,a.jsx)(s.li,{children:"Medium difficulty to set up"}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"option-3-dynamic-module-loading",children:"Option 3: Dynamic Module Loading"}),"\n",(0,a.jsx)(s.p,{children:'Create a root application which can allow single-spa applications to deploy themselves separately. To do so,\ncreate a manifest file that the single-spa applications update during their deployment process, which controls\nwhich versions of the single-spa applications are "live". Then change which JavaScript file is loaded based on the manifest.'}),"\n",(0,a.jsx)(s.p,{children:"Changing which JavaScript file is loaded for each child application can be done in many ways."}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:'Web server: have your webserver create a dynamic script tag for the "live" version of each single-spa application.'}),"\n",(0,a.jsxs)(s.li,{children:["Use a ",(0,a.jsx)(s.a,{href:"https://www.jvandemo.com/a-10-minute-primer-to-javascript-modules-module-formats-module-loaders-and-module-bundlers/",children:"module loader"})," such as ",(0,a.jsx)(s.a,{href:"https://github.com/systemjs/systemjs",children:"SystemJS"})," that can download and execute JavaScript code in the browser from dynamic urls."]}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"comparison",children:"Comparison"}),"\n",(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n  .comparisonTable td {\n    width: 25%;\n  }\n  .comparisonTable .middle {\n    text-align: center;\n    vertical-align: middle;\n  }\n  .comparisonTable ul {\n    padding-left: 1em;\n  }\n"}}),"\n",(0,a.jsxs)("table",{className:"comparisonTable",children:[(0,a.jsx)("caption",{children:"Comparison of front-end system architectures"}),(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{}),(0,a.jsx)("th",{scope:"col",className:"middle",children:"Monorepo"}),(0,a.jsx)("th",{scope:"col",className:"middle",children:"NPM modules"}),(0,a.jsx)("th",{scope:"col",className:"middle",children:"Module loading"})]})}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",children:"Difficulty to set up"}),(0,a.jsx)("td",{className:"middle",children:"Easy"}),(0,a.jsx)("td",{className:"middle",children:"Medium"}),(0,a.jsx)("td",{className:"middle",children:"Hard"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",children:"Separate code repositories"}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{className:"sr-text",children:"No"})}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{className:"sr-text",children:"No"})}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{role:"img","aria-label":"Yes",children:"\u2705"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",children:"Separate builds"}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{className:"sr-text",children:"No"})}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{role:"img","aria-label":"Yes",children:"\u2705"})}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{role:"img","aria-label":"Yes",children:"\u2705"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{scope:"row",children:"Separate deployments"}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{className:"sr-text",children:"No"})}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{role:"img","aria-label":"Yes",children:"\u2705"})}),(0,a.jsx)("td",{className:"middle",children:(0,a.jsx)("span",{role:"img","aria-label":"Yes",children:"\u2705"})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Examples"}),(0,a.jsx)("td",{children:(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://github.com/joeldenning/simple-single-spa-webpack-example",children:"simple-webpack-example"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://github.com/single-spa/single-spa-examples",children:"single-spa-examples"})})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://github.com/jualoppaz/single-spa-login-example-with-npm-packages",children:"single-spa-login-example-with-npm-packages"})})})}),(0,a.jsx)("td",{children:(0,a.jsx)("ul",{children:(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"https://gitlab.com/TheMcMurder/single-spa-portal-example",children:"SystemJS example"})})})})]})]})]})]})}function p(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>o});var a=i(6540);const n={},l=a.createContext(n);function t(e){const s=a.useContext(l);return a.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:t(e.components),a.createElement(l.Provider,{value:s},e.children)}}}]);